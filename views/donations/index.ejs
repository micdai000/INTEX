<!-- Donations List (Manager View) -->
<section class="py-8">
  <div class="container px-4 md:px-6">
    <div class="page-header">
      <div>
        <h1 class="page-title">Donations</h1>
        <p class="text-sm text-gray-600">Total: $<%= parseFloat(totalDonations).toLocaleString('en-US', {minimumFractionDigits: 2}) %></p>
      </div>
      <% if (isManager) { %>
        <a href="/donations/create/new" class="btn-primary">Record Donation</a>
      <% } %>
    </div>

    <form method="GET" action="/donations" class="search-form">
      <input type="text" name="search" value="<%= search %>" placeholder="Search donors..." class="search-input">
      <button type="submit" class="btn-secondary">Search</button>
      <% if (search) { %><a href="/donations" class="btn-secondary">Clear</a><% } %>
    </form>

    <div class="table-container">
      <% if (donations.length > 0) { %>
        <div class="table-scroll-wrapper">
        <table>
          <thead>
            <tr>
              <th>Donor</th>
              <th>Email</th>
              <th>Date</th>
              <th>Amount</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% donations.forEach(d => { %>
              <tr>
                <td class="font-medium"><%= d.first_name %> <%= d.last_name %></td>
                <td><%= d.email %></td>
                <td><%= d.donation_date || '-' %></td>
                <td class="font-semibold text-ella-coral">$<%= parseFloat(d.donation_amount).toFixed(2) %></td>
                <td>
                  <% if (isManager) { %>
                    <div class="actions">
                      <a href="/donations/<%= d.donation_id %>/edit" class="btn-secondary btn-sm">Edit</a>
                      <form method="POST" action="/donations/<%= d.donation_id %>/delete" class="inline" onsubmit="return confirm('Delete this donation?')">
                        <button type="submit" class="btn-danger btn-sm">Delete</button>
                      </form>
                    </div>
                  <% } %>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
        </div>
      <% } else { %>
        <div class="empty-state">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p>No donations found.</p>
        </div>
      <% } %>
    </div>
  </div>
</section>
