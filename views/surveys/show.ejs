<!-- Survey Details -->
<section class="py-8">
  <div class="container px-4 md:px-6">
    <div class="mb-6">
      <a href="/surveys" class="text-sm text-ella-coral hover:underline">&larr; Back to Surveys</a>
    </div>

    <div class="max-w-2xl mx-auto">
      <div class="card">
        <div class="card-header flex justify-between items-center">
          <h1 class="text-2xl font-serif">Survey Response</h1>
          <% if (isManager) { %>
            <div class="actions">
              <a href="/surveys/<%= survey.person_id %>/<%= survey.event_occurrence_id %>/edit" class="btn-secondary btn-sm">Edit</a>
              <form method="POST" action="/surveys/<%= survey.person_id %>/<%= survey.event_occurrence_id %>/delete" class="inline" onsubmit="return confirm('Delete this survey?')">
                <button type="submit" class="btn-danger btn-sm">Delete</button>
              </form>
            </div>
          <% } %>
        </div>
        <div class="card-body">
          <div class="mb-6 pb-6 border-b" style="border-color: rgba(249, 175, 177, 0.3);">
            <p class="text-sm text-gray-500">Participant</p>
            <p class="font-medium text-lg"><%= survey.first_name %> <%= survey.last_name %></p>
            <p class="text-sm"><%= survey.email %></p>
          </div>

          <div class="mb-6 pb-6 border-b" style="border-color: rgba(249, 175, 177, 0.3);">
            <p class="text-sm text-gray-500">Event</p>
            <p class="font-medium"><%= survey.event_name %></p>
            <p class="text-sm text-gray-600">
              <%= survey.event_datetime_start ? new Date(survey.event_datetime_start).toLocaleString() : '' %>
              <% if (survey.event_location) { %> - <%= survey.event_location %><% } %>
            </p>
          </div>

          <div class="grid md:grid-cols-2 gap-4 mb-6">
            <div class="p-4 rounded-lg" style="background: var(--ella-blush);">
              <p class="text-sm text-gray-600">Satisfaction</p>
              <p class="text-2xl font-serif"><%= survey.survey_satisfaction_score || '-' %><span class="text-sm">/5</span></p>
            </div>
            <div class="p-4 rounded-lg" style="background: var(--ella-blush);">
              <p class="text-sm text-gray-600">Usefulness</p>
              <p class="text-2xl font-serif"><%= survey.survey_usefulness_score || '-' %><span class="text-sm">/5</span></p>
            </div>
            <div class="p-4 rounded-lg" style="background: var(--ella-blush);">
              <p class="text-sm text-gray-600">Instructor</p>
              <p class="text-2xl font-serif"><%= survey.survey_instructor_score || '-' %><span class="text-sm">/5</span></p>
            </div>
            <div class="p-4 rounded-lg" style="background: var(--ella-blush);">
              <p class="text-sm text-gray-600">Recommendation</p>
              <p class="text-2xl font-serif"><%= survey.survey_recommendation_score || '-' %><span class="text-sm">/5</span></p>
            </div>
          </div>

          <div class="p-4 rounded-lg mb-6" style="background: var(--ella-blush-light); border: 1px solid var(--ella-rose);">
            <p class="text-sm text-gray-600">Overall Score</p>
            <p class="text-3xl font-serif text-ella-coral"><%= survey.survey_overall_score ? parseFloat(survey.survey_overall_score).toFixed(2) : '-' %><span class="text-lg">/5</span></p>
          </div>

          <% if (survey.survey_comments) { %>
            <div>
              <p class="text-sm text-gray-500 mb-2">Comments</p>
              <p class="p-4 rounded-lg bg-gray-50"><%= survey.survey_comments %></p>
            </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</section>
